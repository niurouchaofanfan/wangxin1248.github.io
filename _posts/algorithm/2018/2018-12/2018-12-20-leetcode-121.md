---
layout: post
title:  "LeetCode 121. 买卖股票的最佳时机"
date:  2018-12-20
desc: "LeetCode 题目之 121. 买卖股票的最佳时机"
keywords: "LeetCode,刷题算法,c++,LeetCode,121. 买卖股票的最佳时机, 动态规划"
categories: [Algorithm]
tags: [LeetCode,算法,C++]
---
# 买卖股票的最佳时机

## 题目描述

给定一个数组，它的第 i 个元素是一支给定股票第 i 天的价格。

如果你最多只允许完成一笔交易（即买入和卖出一支股票），设计一个算法来计算你所能获取的最大利润。

注意你不能在买入股票前卖出股票。

示例 1:

输入: [7,1,5,3,6,4]<br />
输出: 5<br />
解释: 在第 2 天（股票价格 = 1）的时候买入，在第 5 天（股票价格 = 6）的时候卖出，最大利润 = 6-1 = 5 。注意利润不能是 7-1 = 6, 因为卖出价格需要大于买入价格。

示例 2:

输入: [7,6,4,3,1]<br />
输出: 0<br />
解释: 在这种情况下, 没有交易完成, 所以最大利润为 0。

## 解题思路

这是一道动态规划的题目，重点在于找到其所对应的递推公式。

分析下题目：

1. 买入价格必须得小于卖出价格
2. 最终利润为每一次买入卖出利润的最大值

这样便可以得到对应的动态递推公式：

**买入价格=min（之前的买入价格，现在的买入价格）**

**利润=max（之前的最大利润，现在的卖出价格-之前的最小买入价格）**

初始的买入价格为 prices[0] ，初始的利润为0；接下来直接递推下去就好。

## 代码-c++

```cpp
class Solution {
public:
    int maxProfit(vector<int>& prices) {
        // 边界条件判断
        if (prices.size() < 2)
        {
            return 0;
        }
        // 买入价格
        int minprice = prices[0];
        // 收益
        int res = 0;
        for (int e : prices)
        {
            minprice = min(minprice, e);
            res = max(res, e - minprice);
        }
        // 返回最大收益
        return res;
    }
};
```