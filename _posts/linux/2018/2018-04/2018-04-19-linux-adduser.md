---
layout: post
title:  "linux服务器中添加用户并赋予相应权限"
date:  2018-04-19
desc: "在Linux服务器中新建用户账号，并赋予用户权限，使其可以使用sudo命令，linux服务器版本为 Ubuntu16.04"
keywords: "Linux,ubuntu16.04,添加账号,服务器,sudo"
categories: [Linux]
tags: [Linux,Ubuntu,sudo]
---


在unix/linux中添加用户账号可以使用**adduser**或者**useradd**命令，因为adduser命令时指向useradd命令的一个链接。因此，这两个命令的使用格式完全一样。

接下来便使用useradd命令来添加一个新的用户到服务器中，注意：**以下的代码得以root用户的身份进行**
## 创建用户账号
```
sudo useradd 用户名 -m -d /home/用户名
```
### 命令参数：
- **-d**：  指定用户登录系统时的主目录，如果不使用该参数，系统自动在/home目录下建立与用户名同名的目录为主目录。
- **-m**：  自动建立目录
- **-g**：  指定组名称
### 说明
1. linux每个用户都要有一个主目录，主目录就是第一次登录系统，用户默认的当前目录。
2. 每一个用户必须有一个主目录，所以用useradd创建用户的时候，一定得给用户指定一个主目录。
3. 用户的主目录一般要在根目录的home目录下，用户的主目录和用户名是相同的。
4. 如果创建用户的时候不指定组名，那么系统会自动创建一个和用户名一样的组名。

## 设置用户密码
```
passwd 用户名
```
在unix/linux中，超级用户可以使用**passwd**命令为普通用户设置或修改用户口令。用户也可以直接使用该命令来修改自己的口令，而无需在命令的后面使用用户名。

## 为创建的用户添加sudo权限
新创建的用户，默认不能使用sudo，需要进行相应的设置
```
sudo usermod -a -G adm 用户名
sudo usermod -a -G sudo 用户名
```

### 命令参数：
- **-a**：  用来指定这个用户默认的用户组
- **-G**：  一般配合‘-a’来完成其他组的添加

## 切换用户
```
su - 用户名
```
### 命令参数：
su和*su -*的不同之处在于：**su -**切换到对应的用户时会将当前的工作目录自动切换到切换后的用户主目录。

---

## 用户账号操作相关命令

### 删除用户
```
userdel [-r] 用户名
```

- userdel 用户名：  删除用户，但不会自动删除用户的主目录
- userdel -r 用户名：  删除用户，同时删除用户的主目录

### 切换root用户
```
sudo -s
```

### 查看当前登录用户
```
whoami
```

**whoami**命令用于用户查看当前系统当前账号的用户名。可以通过**cat/etc/passwd**查看系统用户信息。

### 查看当前服务器登录信息
```
who
```
**who**命令用来查看当前所有登录系统的用户信息。
#### 常用选项
- **-m 或 am i**：  只显示运行who命令的用户名、登录终端和登录时间
- **-q 或 --count**：  只显示用户的登陆账号和登陆用户的数量
- **-u 或 --heading**：  显示列标题

### 推出登录账号
```
exit
```
- 如果是图形界面，退出当前终端
- 如果是使用ssh远程登录，退出当前登录账号
- 如果是切换后的登录用户，退出则返回到上一个登录账号

### 查看有哪些用户组

方法一：**cat/etc/group**
方法二：**groupmod +三次tab键**

### 添加组账号
```
groupadd 组账号
```

### 删除组账号
```
groupdel 组账号
```

### 查看用户在哪些组
```
groups 用户名
```