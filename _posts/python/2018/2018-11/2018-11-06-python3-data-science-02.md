---
layout: post
title:  "Python3 数据科学（二）：Numpy"
date:  2018-11-06
desc: "python3 数据科学分析与实战系列之二：数据分析工具 Numpy 入门介绍"
keywords: "Python3,数据科学,实战,numpy,数据挖掘,jupyterlab,jupyter"
categories: [Python]
tags: [python3,数据科学,numpy]
---
# Numpy 入门介绍

对于数据分析来说，最常见的数据的格式是数组类型的，为了方便的对这种数据进行表示以及处理，便出现了 numpy 这个数据科学工具库。

## 一、使用numpy创建数组


```python
import numpy as np
```

### 使用python列表来创建数组


```python
list_1 = [1,2,3,4,5]
```


```python
# 使用 np 中的 array 方法来创建一维数组，传入一个列表
array_1 = np.array(list_1)
```


```python
array_1
```




    array([1, 2, 3, 4, 5])




```python
list_2 = [6,7,8,9,10]
```


```python
# 创建二维数组，传入对象也是一个列表
array_2 = np.array([list_1,list_2])
```


```python
array_2
```




    array([[ 1,  2,  3,  4,  5],
           [ 6,  7,  8,  9, 10]])



### 使用numpy 中的 arange 方法来创建数组


```python
#arange(start,end,step)
array_3 = np.arange(1,10)
array_3
```




    array([1, 2, 3, 4, 5, 6, 7, 8, 9])




```python
np.arange(1,10,2)
```




    array([1, 3, 5, 7, 9])



### 使用numpy中的zeros来创建0矩阵


```python
np.zeros(10)
```




    array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0.])




```python
np.zeros([4,6])
```




    array([[0., 0., 0., 0., 0., 0.],
           [0., 0., 0., 0., 0., 0.],
           [0., 0., 0., 0., 0., 0.],
           [0., 0., 0., 0., 0., 0.]])



### 使用numpy 中的 eye方法来创建单位矩阵


```python
np.eye(5)
```




    array([[1., 0., 0., 0., 0.],
           [0., 1., 0., 0., 0.],
           [0., 0., 1., 0., 0.],
           [0., 0., 0., 1., 0.],
           [0., 0., 0., 0., 1.]])



### 使用 numpy 中的 ones 方法来创建数组


```python
np.ones(10)
```




    array([1., 1., 1., 1., 1., 1., 1., 1., 1., 1.])




```python
# 可以指定创建的数组的格式
np.ones((3,5), dtype=np.int32)
```




    array([[1, 1, 1, 1, 1],
           [1, 1, 1, 1, 1],
           [1, 1, 1, 1, 1]], dtype=int32)




```python
# 创建两个数组，纬度为 3*5
np.ones((2,3,5), dtype=np.int32)
```




    array([[[1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1]],
    
           [[1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1],
            [1, 1, 1, 1, 1]]], dtype=int32)



### 使用 numpy 中的 random 来快速的创建数组


```python
# 使用randn 方法来创建给定个数的符合正态分布的随机数组
np.random.randn(10)
```




    array([ 1.12399644, -0.18306161,  0.3000494 , -1.7521904 ,  1.89817102,
           -0.80480167,  0.26562457, -1.59493149, -0.01257156, -0.27458243])




```python
# 使用randint 方法来创建在给定范围内的的随机int数
np.random.randint(10)
```




    8




```python
# 使用randint 方法传入指定的size 便可以创建指定大小的随机的数组
np.random.randint(10,size=(2,3))
```




    array([[4, 9, 1],
           [7, 5, 0]])




```python
np.random.randint(10,size=10)
```




    array([1, 0, 2, 9, 9, 4, 2, 7, 0, 5])




```python
# 使用 random 中的 random 方法来创建从0到1的随机数
np.random.random()
```




    0.8168716118821526




```python
np.random.random((2, 3))
```




    array([[0.35483594, 0.33556368, 0.1035729 ],
           [0.05575464, 0.10188975, 0.25627266]])



### 使用 numpy 中的 linspace 方法来创建数组

```python
linspace(start,end,count)
```
此方法会从start开始到end结束，均匀的创建个数为count个一维数组


```python
np.linspace(1, 10, 100)
```




    array([ 1.        ,  1.09090909,  1.18181818,  1.27272727,  1.36363636,
            1.45454545,  1.54545455,  1.63636364,  1.72727273,  1.81818182,
            1.90909091,  2.        ,  2.09090909,  2.18181818,  2.27272727,
            2.36363636,  2.45454545,  2.54545455,  2.63636364,  2.72727273,
            2.81818182,  2.90909091,  3.        ,  3.09090909,  3.18181818,
            3.27272727,  3.36363636,  3.45454545,  3.54545455,  3.63636364,
            3.72727273,  3.81818182,  3.90909091,  4.        ,  4.09090909,
            4.18181818,  4.27272727,  4.36363636,  4.45454545,  4.54545455,
            4.63636364,  4.72727273,  4.81818182,  4.90909091,  5.        ,
            5.09090909,  5.18181818,  5.27272727,  5.36363636,  5.45454545,
            5.54545455,  5.63636364,  5.72727273,  5.81818182,  5.90909091,
            6.        ,  6.09090909,  6.18181818,  6.27272727,  6.36363636,
            6.45454545,  6.54545455,  6.63636364,  6.72727273,  6.81818182,
            6.90909091,  7.        ,  7.09090909,  7.18181818,  7.27272727,
            7.36363636,  7.45454545,  7.54545455,  7.63636364,  7.72727273,
            7.81818182,  7.90909091,  8.        ,  8.09090909,  8.18181818,
            8.27272727,  8.36363636,  8.45454545,  8.54545455,  8.63636364,
            8.72727273,  8.81818182,  8.90909091,  9.        ,  9.09090909,
            9.18181818,  9.27272727,  9.36363636,  9.45454545,  9.54545455,
            9.63636364,  9.72727273,  9.81818182,  9.90909091, 10.        ])



# 二、访问数组的属性

### shape属性，数组的格式


```python
np.random.random((5,6)).shape
```




    (5, 6)



### size属性，数组中元素的个数


```python
np.random.random((5,6)).size
```




    30



### dtype属性，数组中元素的数据类型


```python
array_2.dtype
```




    dtype('int64')



假如数组中有多种类型的数据元素，那么便取其中精确度最高的类型做为数组的dtype


```python
array_4 = np.array([[1,2,3],[4.0,5,6]])
```


```python
array_4.dtype
```




    dtype('float64')



### ndim属性，返回数组的维度


```python
array_4.ndim
```




    2



## 三、访问数组中的元素

### 访问一维数组


```python
# 切片，从1到4
array_1[1:5]
```




    array([2, 3, 4, 5])




```python
# 访问单个元素
array_1[4]
```




    5



### 访问二维数组


```python
# 二维数组，第1行第3列
array_2[1][3]
```




    9




```python
# 效果和上面相同
array_2[1,3]
```




    9




```python
# 二维数组切片，取出第0行，第二列到第4列的元素，返回结果还是数组
array_2[:1,2:5]
```




    array([[3, 4, 5]])



## 四、数组的运算


```python
# 创建两个数组
a = np.random.randint(10, size=(4,5))
b = np.random.randint(10, size=(4,5))
```


```python
a
```




    array([[3, 4, 8, 5, 1],
           [9, 7, 6, 2, 1],
           [3, 9, 3, 3, 8],
           [8, 5, 6, 2, 3]])




```python
b
```




    array([[0, 3, 5, 0, 0],
           [9, 8, 0, 6, 3],
           [5, 2, 1, 6, 9],
           [1, 3, 4, 7, 4]])




```python
# 加法
a + b
```




    array([[ 6,  5,  6,  7,  9],
           [13, 12, 12,  9,  8],
           [ 8, 15, 17, 10,  5],
           [ 8, 12,  7, 10, 12]])




```python
# 减法
a - b
```




    array([[ 0, -1, -6, -7, -7],
           [-5,  4, -2, -7, -4],
           [ 0,  3,  1,  2, -5],
           [ 4,  4,  3,  4,  6]])




```python
# 乘法
a * b
```




    array([[ 9,  6,  0,  0,  8],
           [36, 32, 35,  8, 12],
           [16, 54, 72, 24,  0],
           [12, 32, 10, 21, 27]])




```python
# 除法
a / b
```




    array([[1.        , 0.66666667, 0.        , 0.        , 0.125     ],
           [0.44444444, 2.        , 0.71428571, 0.125     , 0.33333333],
           [1.        , 1.5       , 1.125     , 1.5       , 0.        ],
           [3.        , 2.        , 2.5       , 2.33333333, 3.        ]])




```python
# 判断数组中是否有元素等于某个值
a == 8
```




    array([[False, False,  True, False, False],
           [False, False, False, False, False],
           [False, False, False, False,  True],
           [ True, False, False, False, False]])




```python
# 数组元素平方操作
a**2
```




    array([[ 9, 16, 64, 25,  1],
           [81, 49, 36,  4,  1],
           [ 9, 81,  9,  9, 64],
           [64, 25, 36,  4,  9]])




```python
# 数组点乘
c = np.random.randint(10, size=(5,4))
np.dot(a,c)
```




    array([[ 95, 108,  60,  70],
           [ 96, 119, 101, 121],
           [137, 183,  58,  94],
           [ 98, 118,  96, 108]])




```python
a.dot(c)
```




    array([[ 95, 108,  60,  70],
           [ 96, 119, 101, 121],
           [137, 183,  58,  94],
           [ 98, 118,  96, 108]])



## 五、array 常用函数


```python
a
```




    array([[3, 4, 8, 5, 1],
           [9, 7, 6, 2, 1],
           [3, 9, 3, 3, 8],
           [8, 5, 6, 2, 3]])




```python
# 获取数组中的出现的元素，唯一不重复
np.unique(a)
```




    array([1, 2, 3, 4, 5, 6, 7, 8, 9])




```python
# sum 对数组的列求和,axis=0表示列
a.sum(axis=0)
```




    array([23, 25, 23, 12, 13])




```python
# sum 对数组的列求和,axis=1表示行
a.sum(axis=1)
```




    array([21, 25, 26, 24])




```python
# 数组转置
a.T
```




    array([[3, 9, 3, 8],
           [4, 7, 9, 5],
           [8, 6, 3, 6],
           [5, 2, 3, 2],
           [1, 1, 8, 3]])




```python
# 将数组变换为一维形式
a.ravel()
```




    array([3, 4, 8, 5, 1, 9, 7, 6, 2, 1, 3, 9, 3, 3, 8, 8, 5, 6, 2, 3])




```python
# 使用 reshape 方法来将创建的一维数组重塑为多维数组
a.reshape(5,4)
```




    array([[3, 4, 8, 5],
           [1, 9, 7, 6],
           [2, 1, 3, 9],
           [3, 3, 8, 8],
           [5, 6, 2, 3]])




```python
# 还可以只指定reshape的行，而列自动计算
a.reshape(4,-1)
```




    array([[3, 4, 8, 5, 1],
           [9, 7, 6, 2, 1],
           [3, 9, 3, 3, 8],
           [8, 5, 6, 2, 3]])




```python
a
```




    array([[4., 7., 9., 7., 0., 2.],
           [1., 5., 6., 9., 5., 1.],
           [6., 7., 8., 6., 6., 2.],
           [3., 2., 3., 6., 5., 8.],
           [7., 7., 5., 4., 2., 2.]])




```python
# 求数组的最大元素的角标
ind = a.argmax(axis=1)
ind
```




    array([2, 3, 2, 5, 0])



## 六、numpy中的常用函数


```python
a = np.random.random((5,6))*10
a
```




    array([[6.75651617, 8.86615078, 3.73158336, 7.74998544, 7.71336696,
            9.78235722],
           [3.41409818, 5.50437349, 9.87704672, 3.46126196, 0.72515358,
            5.89590527],
           [1.43532301, 6.15557699, 8.79169563, 9.8275721 , 5.55034066,
            4.27181458],
           [4.14672791, 0.51154816, 1.06436383, 7.44409734, 9.04706679,
            8.91302935],
           [6.95975606, 9.03349696, 7.37383018, 2.89236794, 8.70215313,
            7.51710103]])




```python
# np.floor:对数组中的元素进行向下取整
np.floor(a)
```




    array([[6., 8., 3., 7., 7., 9.],
           [3., 5., 9., 3., 0., 5.],
           [1., 6., 8., 9., 5., 4.],
           [4., 0., 1., 7., 9., 8.],
           [6., 9., 7., 2., 8., 7.]])




```python
# np.exp:对数组中的元素做exp运算
np.exp(a)
```




    array([[8.59642126e+02, 7.08794531e+03, 4.17451535e+01, 2.32153861e+03,
            2.23806505e+03, 1.77183697e+04],
           [3.03895311e+01, 2.45764434e+02, 1.94781132e+04, 3.18571537e+01,
            2.06504823e+00, 3.63545795e+02],
           [4.20100176e+00, 4.71338723e+02, 6.57937894e+03, 1.85378914e+04,
            2.57325201e+02, 7.16515353e+01],
           [6.32267779e+01, 1.66787132e+00, 2.89899414e+00, 1.70974129e+03,
            8.49358790e+03, 7.42812946e+03],
           [1.05337657e+03, 8.37910985e+03, 1.59372636e+03, 1.80359672e+01,
            6.01585121e+03, 1.83922768e+03]])




```python
# np.sqrt:对数组中的元素做求根操作
np.sqrt(a)
```




    array([[2.59932995, 2.97760823, 1.93173066, 2.78387957, 2.7772949 ,
            3.12767601],
           [1.84772784, 2.34614013, 3.14277691, 1.86044671, 0.8515595 ,
            2.42814853],
           [1.19804967, 2.48104353, 2.96507936, 3.13489587, 2.3559161 ,
            2.06683685],
           [2.03635162, 0.71522595, 1.0316801 , 2.72838732, 3.00783424,
            2.9854697 ],
           [2.63813496, 3.00557764, 2.71547973, 1.70069631, 2.94994121,
            2.74173322]])




```python
# np.sin:对数组元素做sin运算
np.sin(a)
```




    array([[ 0.45585346,  0.53002257, -0.5563533 ,  0.99459727,  0.99013004,
            -0.35000764],
           [-0.26914535, -0.70243423, -0.43700731, -0.31425264,  0.66325039,
            -0.37767129],
           [ 0.99083752, -0.12726227,  0.59163256, -0.39199039, -0.66898669,
            -0.90450685],
           [-0.84423447,  0.48952781,  0.87448052,  0.91716694,  0.36879394,
             0.48970259],
           [ 0.62612285,  0.38137291,  0.88692497,  0.2466527 ,  0.66135576,
             0.94379035]])



接下来是一些简单的数组拼接切割操作


```python
a = np.floor(np.random.random((5,6))*10)
b = np.floor(np.random.random((5,6))*10)
```


```python
a
```




    array([[4., 7., 9., 7., 0., 2.],
           [1., 5., 6., 9., 5., 1.],
           [6., 7., 8., 6., 6., 2.],
           [3., 2., 3., 6., 5., 8.],
           [7., 7., 5., 4., 2., 2.]])




```python
b
```




    array([[8., 7., 6., 9., 6., 6.],
           [0., 3., 3., 3., 8., 9.],
           [5., 5., 8., 4., 5., 3.],
           [3., 4., 3., 9., 9., 6.],
           [9., 5., 7., 6., 5., 5.]])




```python
# np.hstack:数组拼接（横向）
np.hstack((a,b))
```




    array([[4., 7., 9., 7., 0., 2., 8., 7., 6., 9., 6., 6.],
           [1., 5., 6., 9., 5., 1., 0., 3., 3., 3., 8., 9.],
           [6., 7., 8., 6., 6., 2., 5., 5., 8., 4., 5., 3.],
           [3., 2., 3., 6., 5., 8., 3., 4., 3., 9., 9., 6.],
           [7., 7., 5., 4., 2., 2., 9., 5., 7., 6., 5., 5.]])




```python
# np.vstack:数组拼接（纵向）
np.vstack((a,b))
```




    array([[4., 7., 9., 7., 0., 2.],
           [1., 5., 6., 9., 5., 1.],
           [6., 7., 8., 6., 6., 2.],
           [3., 2., 3., 6., 5., 8.],
           [7., 7., 5., 4., 2., 2.],
           [8., 7., 6., 9., 6., 6.],
           [0., 3., 3., 3., 8., 9.],
           [5., 5., 8., 4., 5., 3.],
           [3., 4., 3., 9., 9., 6.],
           [9., 5., 7., 6., 5., 5.]])




```python
# np.hsplit:数组分割，按行，3表示分为几份
np.hsplit(a,3)
```




    [array([[4., 7.],
            [1., 5.],
            [6., 7.],
            [3., 2.],
            [7., 7.]]), array([[9., 7.],
            [6., 9.],
            [8., 6.],
            [3., 6.],
            [5., 4.]]), array([[0., 2.],
            [5., 1.],
            [6., 2.],
            [5., 8.],
            [2., 2.]])]




```python
# np.hsplit:数组分割，按行，(3,4)表示切分位置
np.hsplit(a,(3,4))
```




    [array([[4., 7., 9.],
            [1., 5., 6.],
            [6., 7., 8.],
            [3., 2., 3.],
            [7., 7., 5.]]), array([[7.],
            [9.],
            [6.],
            [6.],
            [4.]]), array([[0., 2.],
            [5., 1.],
            [6., 2.],
            [5., 8.],
            [2., 2.]])]




```python
# np.vsplit:数组分割，按列，3表示分为几份
c = np.floor(np.random.random((6,6))*10)
np.vsplit(c,2)
```




    [array([[4., 3., 7., 1., 0., 1.],
            [3., 7., 3., 2., 9., 9.],
            [3., 0., 1., 6., 8., 3.]]), array([[4., 8., 5., 8., 5., 3.],
            [1., 9., 7., 6., 2., 4.],
            [6., 0., 3., 8., 6., 9.]])]




```python
# np.tile:将一个数组进行扩展，可扩展为指定格式
a = np.array([1,2,3])
np.tile(a, (3,5))
```




    array([[1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3],
           [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3],
           [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3]])




```python
# np.sort:对数组内的元素进行排序
np.sort(b, axis=0)
```




    array([[0., 3., 3., 3., 5., 3.],
           [3., 4., 3., 4., 5., 5.],
           [5., 5., 6., 6., 6., 6.],
           [8., 5., 7., 9., 8., 6.],
           [9., 7., 8., 9., 9., 9.]])




```python
# np.argsort:获得数组值从小到大的索引
np.argsort(b)
```




    array([[2, 4, 5, 1, 0, 3],
           [0, 1, 2, 3, 4, 5],
           [5, 3, 0, 1, 4, 2],
           [0, 2, 1, 5, 3, 4],
           [1, 4, 5, 3, 2, 0]])




```python
b
```




    array([[8., 7., 6., 9., 6., 6.],
           [0., 3., 3., 3., 8., 9.],
           [5., 5., 8., 4., 5., 3.],
           [3., 4., 3., 9., 9., 6.],
           [9., 5., 7., 6., 5., 5.]])



## 七、数组的复制


```python
a = np.array([[1,2,3],[4,5,6],[7,8,9]])
```


```python
# 1.简单复制，引用传递
b = a
```


```python
b
```




    array([[1, 2, 3],
           [4, 5, 6],
           [7, 8, 9]])




```python
b.shape = (1,9)
```


```python
b
```




    array([[1, 2, 3, 4, 5, 6, 7, 8, 9]])




```python
a
```




    array([[1, 2, 3, 4, 5, 6, 7, 8, 9]])




```python
id(a)
```




    4683219232




```python
id(b)
```




    4683219232




```python
# 2.view方法浅拷贝，创建了新的对象，但共用值
a = np.array([[1,2,3],[4,5,6],[7,8,9]])
b = a.view()
b
```




    array([[1, 2, 3],
           [4, 5, 6],
           [7, 8, 9]])




```python
id(a)
```




    4683221232




```python
id(b)
```




    4683221792




```python
b.shape = (1,9)
b
```




    array([[1, 2, 3, 4, 5, 6, 7, 8, 9]])




```python
a
```




    array([[1, 2, 3],
           [4, 5, 6],
           [7, 8, 9]])




```python
b[:,5] = 10
```


```python
b
```




    array([[ 1,  2,  3,  4,  5, 10,  7,  8,  9]])




```python
a
```




    array([[ 1,  2,  3],
           [ 4,  5, 10],
           [ 7,  8,  9]])




```python
# 3.copy:深拷贝，创建新的对象，完全复制值
a = np.array([[1,2,3],[4,5,6],[7,8,9]])
b = a.copy()
b
```




    array([[1, 2, 3],
           [4, 5, 6],
           [7, 8, 9]])




```python
id(a)
```




    4683203168




```python
id(b)
```




    4683203248




```python
b.shape = (1,9)
```


```python
b
```




    array([[1, 2, 3, 4, 5, 6, 7, 8, 9]])




```python
a
```




    array([[1, 2, 3],
           [4, 5, 6],
           [7, 8, 9]])




```python
b[:,5] = 10
```


```python
b
```




    array([[ 1,  2,  3,  4,  5, 10,  7,  8,  9]])




```python
a
```




    array([[1, 2, 3],
           [4, 5, 6],
           [7, 8, 9]])




```python

```
